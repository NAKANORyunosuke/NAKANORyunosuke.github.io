{
  "version": 3,
  "sources": ["../../src/ts/components/lang-switch.ts", "../../src/ts/components/menu.ts", "../../src/ts/components/last-updated.ts", "../../src/ts/components/animations.ts", "../../src/ts/main.ts"],
  "sourcesContent": ["export type Language = 'ja' | 'en';\n\nconst LANGUAGE_COOKIE = 'lang';\nconst LANGUAGE_STORAGE_KEY = 'preferred-lang';\nconst COOKIE_LIFETIME_DAYS = 30;\nconst LANGUAGE_EVENT = 'preferredlanguagechange';\n\nconst LANGUAGE_LABELS: Record<Language, string> = {\n  ja: '\u65E5\u672C\u8A9E',\n  en: 'English',\n};\n\nfunction isLanguage(value: string | null): value is Language {\n  return value === 'ja' || value === 'en';\n}\n\nfunction setCookie(name: string, value: string, days: number): void {\n  const expires = new Date(Date.now() + days * 864e5).toUTCString();\n  document.cookie = `${name}=${encodeURIComponent(value)}; expires=${expires}; path=/; SameSite=Lax`;\n}\n\nfunction getCookie(name: string): string | null {\n  if (!document.cookie) return null;\n  const parts = document.cookie.split(';');\n  for (const raw of parts) {\n    const trimmed = raw.trim();\n    if (!trimmed) continue;\n    const eq = trimmed.indexOf('=');\n    if (eq === -1) continue;\n    if (trimmed.slice(0, eq) === name) {\n      return decodeURIComponent(trimmed.slice(eq + 1));\n    }\n  }\n  return null;\n}\n\nfunction storeLanguage(lang: Language): void {\n  setCookie(LANGUAGE_COOKIE, lang, COOKIE_LIFETIME_DAYS);\n  try {\n    window.localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);\n  } catch {\n    /* localStorage unavailable */\n  }\n}\n\nfunction loadStoredLanguage(): Language | null {\n  try {\n    const stored = window.localStorage.getItem(LANGUAGE_STORAGE_KEY);\n    if (isLanguage(stored)) return stored;\n  } catch {\n    /* ignore */\n  }\n  const cookie = getCookie(LANGUAGE_COOKIE);\n  return isLanguage(cookie) ? cookie : null;\n}\n\nfunction detectBrowserLanguage(): Language {\n  const sources = Array.isArray(navigator.languages) && navigator.languages.length ? navigator.languages : [navigator.language];\n  for (const value of sources) {\n    if (typeof value === 'string' && value.toLowerCase().startsWith('ja')) {\n      return 'ja';\n    }\n  }\n  return 'en';\n}\n\nfunction getUrlLanguage(): Language | null {\n  try {\n    const params = new URLSearchParams(window.location.search);\n    const lang = params.get('lang');\n    return isLanguage(lang) ? lang : null;\n  } catch {\n    return null;\n  }\n}\n\nfunction updateDocumentLanguage(lang: Language): void {\n  const html = document.documentElement;\n  if (html.getAttribute('lang') !== lang) html.setAttribute('lang', lang);\n  if (html.getAttribute('data-lang') !== lang) html.setAttribute('data-lang', lang);\n\n  const selector = document.getElementById('lang-select') as HTMLSelectElement | null;\n  if (selector && selector.value !== lang) selector.value = lang;\n\n  document.dispatchEvent(new CustomEvent<Language>(LANGUAGE_EVENT, { detail: lang }));\n}\n\nfunction chooseInitialLanguage(): Language {\n  const urlLang = getUrlLanguage();\n  if (urlLang) return urlLang;\n\n  const stored = loadStoredLanguage();\n  if (stored) return stored;\n\n  return detectBrowserLanguage();\n}\n\nexport function initLangSwitch(): void {\n  const selector = document.getElementById('lang-select') as HTMLSelectElement | null;\n  const initial = chooseInitialLanguage();\n  storeLanguage(initial);\n  updateDocumentLanguage(initial);\n\n  if (selector) {\n    selector.setAttribute('aria-label', 'Select language');\n    selector.setAttribute('title', 'Select language');\n    selector.addEventListener('change', (event) => {\n      const target = event.target as HTMLSelectElement | null;\n      if (!target) return;\n      const value = target.value;\n      if (!isLanguage(value)) return;\n      storeLanguage(value);\n      updateDocumentLanguage(value);\n    });\n  }\n}\n\nexport { LANGUAGE_EVENT, LANGUAGE_LABELS };\n", "import { LANGUAGE_EVENT, Language, LANGUAGE_LABELS } from './lang-switch';\n\nconst MENU_ICON_OPEN = '\u2630';\nconst MENU_ICON_CLOSE = '\u2715';\nconst NAV_ID = 'primary-nav';\n\nconst MENU_LABELS: Record<Language, { open: string; close: string }> = {\n  ja: { open: '\u30E1\u30CB\u30E5\u30FC\u3092\u958B\u304F', close: '\u30E1\u30CB\u30E5\u30FC\u3092\u9589\u3058\u308B' },\n  en: { open: 'Open menu', close: 'Close menu' },\n};\n\nfunction updateMenuButton(button: HTMLButtonElement, isOpen: boolean, lang: Language): void {\n  const labels = MENU_LABELS[lang] || MENU_LABELS.ja;\n  button.textContent = isOpen ? MENU_ICON_CLOSE : MENU_ICON_OPEN;\n  button.setAttribute('aria-expanded', String(isOpen));\n  button.setAttribute('aria-label', isOpen ? labels.close : labels.open);\n}\n\nfunction closeMenu(nav: HTMLElement, button: HTMLButtonElement, lang: Language): void {\n  if (nav.classList.contains('is-open')) {\n    nav.classList.remove('is-open');\n    updateMenuButton(button, false, lang);\n  }\n}\n\nexport function initMenuToggle(): void {\n  const nav = document.getElementById(NAV_ID) as HTMLElement | null;\n  const button = document.querySelector<HTMLButtonElement>('.menu-btn');\n  if (!nav || !button) return;\n\n  const getCurrentLanguage = (): Language => {\n    const lang = document.documentElement.getAttribute('data-lang') || document.documentElement.getAttribute('lang') || 'ja';\n    return lang === 'en' ? 'en' : 'ja';\n  };\n\n  const initialLang = getCurrentLanguage();\n  updateMenuButton(button, nav.classList.contains('is-open'), initialLang);\n\n  button.addEventListener('click', () => {\n    const lang = getCurrentLanguage();\n    const isOpen = nav.classList.toggle('is-open');\n    updateMenuButton(button, isOpen, lang);\n  });\n\n  nav.addEventListener('click', (event) => {\n    const target = event.target as HTMLElement | null;\n    if (!target) return;\n    if (target.tagName.toLowerCase() === 'a' && window.matchMedia('(max-width: 980px)').matches) {\n      closeMenu(nav, button, getCurrentLanguage());\n    }\n  });\n\n  document.addEventListener(LANGUAGE_EVENT, (event) => {\n    const lang = (event as CustomEvent<Language>).detail || getCurrentLanguage();\n    const isOpen = nav.classList.contains('is-open');\n    updateMenuButton(button, isOpen, lang);\n    button.setAttribute('title', LANGUAGE_LABELS[lang] || LANGUAGE_LABELS.ja);\n  });\n}\n", "function formatWithPadding(value: number): string {\n  return String(value).padStart(2, '0');\n}\n\nexport function initLastUpdated(): void {\n  const lastJa = document.getElementById('last-updated-ja');\n  const lastEn = document.getElementById('last-updated-en');\n  if (!lastJa && !lastEn) return;\n\n  const d = new Date(document.lastModified);\n  const yyyy = d.getFullYear();\n  const mm = formatWithPadding(d.getMonth() + 1);\n  const dd = formatWithPadding(d.getDate());\n  const hh = formatWithPadding(d.getHours());\n  const mi = formatWithPadding(d.getMinutes());\n\n  if (lastJa) {\n    lastJa.textContent = `${yyyy}\u5E74${mm}\u6708${dd}\u65E5 ${hh}:${mi}`;\n  }\n  if (lastEn) {\n    lastEn.textContent = `${yyyy}-${mm}-${dd} ${hh}:${mi}`;\n  }\n}\n", "export function initScrollAnimations(): void {\n  const animatedElements = document.querySelectorAll<HTMLElement>('.reveal-on-scroll');\n  if (!('IntersectionObserver' in window) || animatedElements.length === 0) return;\n\n  const observer = new IntersectionObserver(\n    (entries, obs) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('is-visible');\n          obs.unobserve(entry.target);\n        }\n      });\n    },\n    { root: null, rootMargin: '0px', threshold: 0.1 },\n  );\n\n  animatedElements.forEach((el, index) => {\n    el.style.transitionDelay = `${(index % 5) * 100}ms`;\n    observer.observe(el);\n  });\n}\n", "import { initLangSwitch } from './components/lang-switch';\nimport { initMenuToggle } from './components/menu';\nimport { initLastUpdated } from './components/last-updated';\nimport { initScrollAnimations } from './components/animations';\n\nfunction renderMathIfReady(): void {\n  const render = (window as unknown as { renderMathInElement?: Function }).renderMathInElement;\n  if (typeof render !== 'function') return;\n\n  render(document.body, {\n    delimiters: [\n      { left: '$$', right: '$$', display: true },\n      { left: '\\\\[', right: '\\\\]', display: true },\n      { left: '$', right: '$', display: false },\n      { left: '\\\\(', right: '\\\\)', display: false },\n    ],\n    throwOnError: false,\n    strict: false,\n    ignoredTags: ['script', 'noscript', 'style', 'textarea', 'code', 'pre'],\n  });\n}\n\nfunction initMathRender(): void {\n  if (document.readyState !== 'loading') renderMathIfReady();\n  document.addEventListener('DOMContentLoaded', renderMathIfReady);\n  window.addEventListener('load', renderMathIfReady);\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initLangSwitch();\n  initMenuToggle();\n  initLastUpdated();\n  initScrollAnimations();\n  initMathRender();\n});\n"],
  "mappings": ";;;AAEA,MAAM,kBAAkB;AACxB,MAAM,uBAAuB;AAC7B,MAAM,uBAAuB;AAC7B,MAAM,iBAAiB;AAEvB,MAAM,kBAA4C;AAAA,IAChD,IAAI;AAAA,IACJ,IAAI;AAAA,EACN;AAEA,WAAS,WAAW,OAAyC;AAC3D,WAAO,UAAU,QAAQ,UAAU;AAAA,EACrC;AAEA,WAAS,UAAU,MAAc,OAAe,MAAoB;AAClE,UAAM,UAAU,IAAI,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,EAAE,YAAY;AAChE,aAAS,SAAS,GAAG,IAAI,IAAI,mBAAmB,KAAK,CAAC,aAAa,OAAO;AAAA,EAC5E;AAEA,WAAS,UAAU,MAA6B;AAC9C,QAAI,CAAC,SAAS,OAAQ,QAAO;AAC7B,UAAM,QAAQ,SAAS,OAAO,MAAM,GAAG;AACvC,eAAW,OAAO,OAAO;AACvB,YAAM,UAAU,IAAI,KAAK;AACzB,UAAI,CAAC,QAAS;AACd,YAAM,KAAK,QAAQ,QAAQ,GAAG;AAC9B,UAAI,OAAO,GAAI;AACf,UAAI,QAAQ,MAAM,GAAG,EAAE,MAAM,MAAM;AACjC,eAAO,mBAAmB,QAAQ,MAAM,KAAK,CAAC,CAAC;AAAA,MACjD;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAEA,WAAS,cAAc,MAAsB;AAC3C,cAAU,iBAAiB,MAAM,oBAAoB;AACrD,QAAI;AACF,aAAO,aAAa,QAAQ,sBAAsB,IAAI;AAAA,IACxD,SAAQ;AAAA,IAER;AAAA,EACF;AAEA,WAAS,qBAAsC;AAC7C,QAAI;AACF,YAAM,SAAS,OAAO,aAAa,QAAQ,oBAAoB;AAC/D,UAAI,WAAW,MAAM,EAAG,QAAO;AAAA,IACjC,SAAQ;AAAA,IAER;AACA,UAAM,SAAS,UAAU,eAAe;AACxC,WAAO,WAAW,MAAM,IAAI,SAAS;AAAA,EACvC;AAEA,WAAS,wBAAkC;AACzC,UAAM,UAAU,MAAM,QAAQ,UAAU,SAAS,KAAK,UAAU,UAAU,SAAS,UAAU,YAAY,CAAC,UAAU,QAAQ;AAC5H,eAAW,SAAS,SAAS;AAC3B,UAAI,OAAO,UAAU,YAAY,MAAM,YAAY,EAAE,WAAW,IAAI,GAAG;AACrE,eAAO;AAAA,MACT;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAEA,WAAS,iBAAkC;AACzC,QAAI;AACF,YAAM,SAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM;AACzD,YAAM,OAAO,OAAO,IAAI,MAAM;AAC9B,aAAO,WAAW,IAAI,IAAI,OAAO;AAAA,IACnC,SAAQ;AACN,aAAO;AAAA,IACT;AAAA,EACF;AAEA,WAAS,uBAAuB,MAAsB;AACpD,UAAM,OAAO,SAAS;AACtB,QAAI,KAAK,aAAa,MAAM,MAAM,KAAM,MAAK,aAAa,QAAQ,IAAI;AACtE,QAAI,KAAK,aAAa,WAAW,MAAM,KAAM,MAAK,aAAa,aAAa,IAAI;AAEhF,UAAM,WAAW,SAAS,eAAe,aAAa;AACtD,QAAI,YAAY,SAAS,UAAU,KAAM,UAAS,QAAQ;AAE1D,aAAS,cAAc,IAAI,YAAsB,gBAAgB,EAAE,QAAQ,KAAK,CAAC,CAAC;AAAA,EACpF;AAEA,WAAS,wBAAkC;AACzC,UAAM,UAAU,eAAe;AAC/B,QAAI,QAAS,QAAO;AAEpB,UAAM,SAAS,mBAAmB;AAClC,QAAI,OAAQ,QAAO;AAEnB,WAAO,sBAAsB;AAAA,EAC/B;AAEO,WAAS,iBAAuB;AACrC,UAAM,WAAW,SAAS,eAAe,aAAa;AACtD,UAAM,UAAU,sBAAsB;AACtC,kBAAc,OAAO;AACrB,2BAAuB,OAAO;AAE9B,QAAI,UAAU;AACZ,eAAS,aAAa,cAAc,iBAAiB;AACrD,eAAS,aAAa,SAAS,iBAAiB;AAChD,eAAS,iBAAiB,UAAU,CAAC,UAAU;AAC7C,cAAM,SAAS,MAAM;AACrB,YAAI,CAAC,OAAQ;AACb,cAAM,QAAQ,OAAO;AACrB,YAAI,CAAC,WAAW,KAAK,EAAG;AACxB,sBAAc,KAAK;AACnB,+BAAuB,KAAK;AAAA,MAC9B,CAAC;AAAA,IACH;AAAA,EACF;;;ACjHA,MAAM,iBAAiB;AACvB,MAAM,kBAAkB;AACxB,MAAM,SAAS;AAEf,MAAM,cAAiE;AAAA,IACrE,IAAI,EAAE,MAAM,8CAAW,OAAO,mDAAW;AAAA,IACzC,IAAI,EAAE,MAAM,aAAa,OAAO,aAAa;AAAA,EAC/C;AAEA,WAAS,iBAAiB,QAA2B,QAAiB,MAAsB;AAC1F,UAAM,SAAS,YAAY,IAAI,KAAK,YAAY;AAChD,WAAO,cAAc,SAAS,kBAAkB;AAChD,WAAO,aAAa,iBAAiB,OAAO,MAAM,CAAC;AACnD,WAAO,aAAa,cAAc,SAAS,OAAO,QAAQ,OAAO,IAAI;AAAA,EACvE;AAEA,WAAS,UAAU,KAAkB,QAA2B,MAAsB;AACpF,QAAI,IAAI,UAAU,SAAS,SAAS,GAAG;AACrC,UAAI,UAAU,OAAO,SAAS;AAC9B,uBAAiB,QAAQ,OAAO,IAAI;AAAA,IACtC;AAAA,EACF;AAEO,WAAS,iBAAuB;AACrC,UAAM,MAAM,SAAS,eAAe,MAAM;AAC1C,UAAM,SAAS,SAAS,cAAiC,WAAW;AACpE,QAAI,CAAC,OAAO,CAAC,OAAQ;AAErB,UAAM,qBAAqB,MAAgB;AACzC,YAAM,OAAO,SAAS,gBAAgB,aAAa,WAAW,KAAK,SAAS,gBAAgB,aAAa,MAAM,KAAK;AACpH,aAAO,SAAS,OAAO,OAAO;AAAA,IAChC;AAEA,UAAM,cAAc,mBAAmB;AACvC,qBAAiB,QAAQ,IAAI,UAAU,SAAS,SAAS,GAAG,WAAW;AAEvE,WAAO,iBAAiB,SAAS,MAAM;AACrC,YAAM,OAAO,mBAAmB;AAChC,YAAM,SAAS,IAAI,UAAU,OAAO,SAAS;AAC7C,uBAAiB,QAAQ,QAAQ,IAAI;AAAA,IACvC,CAAC;AAED,QAAI,iBAAiB,SAAS,CAAC,UAAU;AACvC,YAAM,SAAS,MAAM;AACrB,UAAI,CAAC,OAAQ;AACb,UAAI,OAAO,QAAQ,YAAY,MAAM,OAAO,OAAO,WAAW,oBAAoB,EAAE,SAAS;AAC3F,kBAAU,KAAK,QAAQ,mBAAmB,CAAC;AAAA,MAC7C;AAAA,IACF,CAAC;AAED,aAAS,iBAAiB,gBAAgB,CAAC,UAAU;AACnD,YAAM,OAAQ,MAAgC,UAAU,mBAAmB;AAC3E,YAAM,SAAS,IAAI,UAAU,SAAS,SAAS;AAC/C,uBAAiB,QAAQ,QAAQ,IAAI;AACrC,aAAO,aAAa,SAAS,gBAAgB,IAAI,KAAK,gBAAgB,EAAE;AAAA,IAC1E,CAAC;AAAA,EACH;;;AC1DA,WAAS,kBAAkB,OAAuB;AAChD,WAAO,OAAO,KAAK,EAAE,SAAS,GAAG,GAAG;AAAA,EACtC;AAEO,WAAS,kBAAwB;AACtC,UAAM,SAAS,SAAS,eAAe,iBAAiB;AACxD,UAAM,SAAS,SAAS,eAAe,iBAAiB;AACxD,QAAI,CAAC,UAAU,CAAC,OAAQ;AAExB,UAAM,IAAI,IAAI,KAAK,SAAS,YAAY;AACxC,UAAM,OAAO,EAAE,YAAY;AAC3B,UAAM,KAAK,kBAAkB,EAAE,SAAS,IAAI,CAAC;AAC7C,UAAM,KAAK,kBAAkB,EAAE,QAAQ,CAAC;AACxC,UAAM,KAAK,kBAAkB,EAAE,SAAS,CAAC;AACzC,UAAM,KAAK,kBAAkB,EAAE,WAAW,CAAC;AAE3C,QAAI,QAAQ;AACV,aAAO,cAAc,GAAG,IAAI,SAAI,EAAE,SAAI,EAAE,UAAK,EAAE,IAAI,EAAE;AAAA,IACvD;AACA,QAAI,QAAQ;AACV,aAAO,cAAc,GAAG,IAAI,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;AAAA,IACtD;AAAA,EACF;;;ACtBO,WAAS,uBAA6B;AAC3C,UAAM,mBAAmB,SAAS,iBAA8B,mBAAmB;AACnF,QAAI,EAAE,0BAA0B,WAAW,iBAAiB,WAAW,EAAG;AAE1E,UAAM,WAAW,IAAI;AAAA,MACnB,CAAC,SAAS,QAAQ;AAChB,gBAAQ,QAAQ,CAAC,UAAU;AACzB,cAAI,MAAM,gBAAgB;AACxB,kBAAM,OAAO,UAAU,IAAI,YAAY;AACvC,gBAAI,UAAU,MAAM,MAAM;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACH;AAAA,MACA,EAAE,MAAM,MAAM,YAAY,OAAO,WAAW,IAAI;AAAA,IAClD;AAEA,qBAAiB,QAAQ,CAAC,IAAI,UAAU;AACtC,SAAG,MAAM,kBAAkB,GAAI,QAAQ,IAAK,GAAG;AAC/C,eAAS,QAAQ,EAAE;AAAA,IACrB,CAAC;AAAA,EACH;;;ACfA,WAAS,oBAA0B;AACjC,UAAM,SAAU,OAAyD;AACzE,QAAI,OAAO,WAAW,WAAY;AAElC,WAAO,SAAS,MAAM;AAAA,MACpB,YAAY;AAAA,QACV,EAAE,MAAM,MAAM,OAAO,MAAM,SAAS,KAAK;AAAA,QACzC,EAAE,MAAM,OAAO,OAAO,OAAO,SAAS,KAAK;AAAA,QAC3C,EAAE,MAAM,KAAK,OAAO,KAAK,SAAS,MAAM;AAAA,QACxC,EAAE,MAAM,OAAO,OAAO,OAAO,SAAS,MAAM;AAAA,MAC9C;AAAA,MACA,cAAc;AAAA,MACd,QAAQ;AAAA,MACR,aAAa,CAAC,UAAU,YAAY,SAAS,YAAY,QAAQ,KAAK;AAAA,IACxE,CAAC;AAAA,EACH;AAEA,WAAS,iBAAuB;AAC9B,QAAI,SAAS,eAAe,UAAW,mBAAkB;AACzD,aAAS,iBAAiB,oBAAoB,iBAAiB;AAC/D,WAAO,iBAAiB,QAAQ,iBAAiB;AAAA,EACnD;AAEA,WAAS,iBAAiB,oBAAoB,MAAM;AAClD,mBAAe;AACf,mBAAe;AACf,oBAAgB;AAChB,yBAAqB;AACrB,mBAAe;AAAA,EACjB,CAAC;",
  "names": []
}
